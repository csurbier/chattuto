(self.webpackChunkchattuto=self.webpackChunkchattuto||[]).push([[4874],{4874:(o,e,i)=>{"use strict";i.r(e),i.d(e,{LoginPagePageModule:()=>f});var r=i(1116),t=i(1462),n=i(6611),s=i(4905),a=i(2755),c=i(8619),l=i(2767),u=i(9002),d=i(3412),p=i(4419);function m(o,e){1&o&&(c.TgZ(0,"ion-item"),c.TgZ(1,"p"),c._uU(2,"An email is required "),c.qZA(),c.qZA())}function g(o,e){1&o&&(c.TgZ(0,"ion-item"),c.TgZ(1,"p"),c._uU(2,"min. 8 characters required with lowercase, uppercase, number and special character"),c.qZA(),c.qZA())}const h=[{path:"",component:(()=>{class o{constructor(o,e,i,r,n,s,a,c,l){this.loadingController=o,this.router=e,this.platform=i,this.formBuilder=r,this.userManager=n,this.alertController=s,this.apiService=a,this.authentificationService=c,this.inAppBrowser=l,this.userForm=r.group({email:["",t.kI.compose([t.kI.required,t.kI.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")])],password:["",t.kI.compose([t.kI.minLength(8),t.kI.required,t.kI.pattern("(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[\u20ac$@$!%*?&])[A-Za-zd$@\u20ac$!%*?&].{8,}")])]})}ngAfterViewInit(){a.c.hide()}login(){let o=this.userForm.value.email,e=this.userForm.value.password;this.apiService.networkConnected?(this.apiService.showLoading(),this.authentificationService.login({email:o,password:e}).then(e=>{this.apiService.stopLoading(),e?this.apiService.findUserWithQuery("?email="+o).subscribe(o=>{if(o){let e=o.count;if(console.log("Count "+e),0==e)this.apiService.showError("Identification failed ! No account found");else{let e=o.results[0];console.log(e),this.userManager.setUser(e).then(o=>{console.log("===Can go to next screen"),this.router.navigateByUrl("/home",{replaceUrl:!0})})}}else this.apiService.showError("An error occured with credentials, no account found")}):this.apiService.showError("An error occured with credentials")})):this.apiService.showNoNetwork()}cgu(){this.inAppBrowser.create("https://policies.google.com/terms","_blank","location=no,zoom=no")}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)(c.Y36(n.HT),c.Y36(s.F0),c.Y36(n.t4),c.Y36(t.qu),c.Y36(l.C),c.Y36(n.Br),c.Y36(u.OX),c.Y36(d.$),c.Y36(p.i))},o.\u0275cmp=c.Xpm({type:o,selectors:[["app-login-page"]],decls:27,vars:8,consts:[["color","medium","padding","","padding-24",""],[1,"auth-container"],[1,"form"],[1,"form-title"],[3,"formGroup"],["lines","none","mode","ios","login-form",""],["mode","ios"],["slot","start",1,"sw-email-solid"],["mode","ios","type","email","placeholder","Email","name","email","formControlName","email"],[4,"ngIf"],["slot","start",1,"sw-lock-sold"],["mode","ios","type","password","placeholder","Password","formControlName","password"],["text-right","",1,"buttons-forgot"],["mode","ios","expand","block","color","danger",3,"disabled","click"],[1,"instruction",3,"click"],["no-border","","mode","ios","auth",""],["color","medium","mode","ios","text-center",""],[1,"option-auth"],["fill","clear","expand","block","routerLink","/register","mode","ios","color","danger"]],template:function(o,e){1&o&&(c.TgZ(0,"ion-content",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"div",3),c._uU(4," Sign In "),c.qZA(),c.TgZ(5,"form",4),c.TgZ(6,"ion-list",5),c.TgZ(7,"ion-item",6),c._UZ(8,"ion-icon",7),c._UZ(9,"ion-input",8),c.qZA(),c.YNc(10,m,3,0,"ion-item",9),c.TgZ(11,"ion-item",6),c._UZ(12,"ion-icon",10),c._UZ(13,"ion-input",11),c.qZA(),c.YNc(14,g,3,0,"ion-item",9),c.qZA(),c.TgZ(15,"div",12),c.TgZ(16,"ion-button",13),c.NdJ("click",function(){return e.login()}),c._uU(17," Sign in "),c.qZA(),c.qZA(),c.qZA(),c.TgZ(18,"p",14),c.NdJ("click",function(){return e.cgu()}),c._uU(19,"By signin, you will accept our terms and condition."),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(20,"ion-footer",15),c.TgZ(21,"ion-toolbar",16),c.TgZ(22,"div",17),c.TgZ(23,"p"),c._uU(24,"Not yet registered?"),c.qZA(),c.TgZ(25,"ion-button",18),c._uU(26,"Sign up"),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&o&&(c.xp6(5),c.Q6J("formGroup",e.userForm),c.xp6(4),c.ekj("invalid",!e.userForm.controls.email.valid&&e.userForm.controls.email.dirty),c.xp6(1),c.Q6J("ngIf",!e.userForm.controls.email.valid&&e.userForm.controls.email.dirty),c.xp6(3),c.ekj("invalid",!e.userForm.controls.password.valid&&e.userForm.controls.password.dirty),c.xp6(1),c.Q6J("ngIf",!e.userForm.controls.password.valid&&e.userForm.controls.password.dirty),c.xp6(2),c.Q6J("disabled",!e.userForm.valid))},directives:[n.W2,t._Y,t.JL,t.sg,n.q_,n.Ie,n.gu,n.pK,n.j9,t.JJ,t.u,r.O5,n.YG,n.fr,n.sr,n.YI,s.rH],styles:[".buttons-forgot[_ngcontent-%COMP%]   ion-button.forgot-password[_ngcontent-%COMP%]{font-size:15px;min-height:unset;height:34px;margin:0 0 12px}.option-auth[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}p[_ngcontent-%COMP%]{font-size:.8em;color:red}"]}),o})()}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[s.Bz.forChild(h)],s.Bz]}),o})(),f=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=c.oAB({type:o}),o.\u0275inj=c.cJS({imports:[[r.ez,t.u5,t.UX,n.Pc,Z]]}),o})()}}]);